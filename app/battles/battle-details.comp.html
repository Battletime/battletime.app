<ion-view view-title="Battletime">
    <ion-content>
        <div class="bar bar-subheader bar-stable static text-center">
            <strong class="title">Battle details</strong>
        </div>

        <ion-refresher pulling-text="Pull to refresh" on-refresh="getBattle()"></ion-refresher>

        <div ng-show="battle" >

            <div class="list card bordered">

                <div class="item item-icon-left">
                    <i class="icon ion-ios-clock"></i>
                    <span >{{ battle.stoppedOn ? (battle.stoppedOn | date : 'medium') : 'In progress' }}</span>
                </div>

                <div class="item item-icon-left">
                    <i class="icon ion-trophy"></i>
                    <span>{{battle.winner ? battle.winner.username : 'No winner' }}</span>
                </div>
    
                <div href="#" class="item item-icon-left">
                    <i class="icon ion-flag"></i>
                    <span>{{battle.event ? battle.event.name : 'Callout' }}</span>
                </div>
            </div>

            <div class="list bordered">

                <div class="item item-icon-left">
                    <i class="icon ion-person"></i>
                    <h2>Participants</h2>
                    <p>These brave dances gave it all they got!</p>
                </div>
   
                <div class="item item-avatar participants" ng-repeat="user in battle.participants">
                    <img ng-src="{{user.imageUri | image}}" >
                    <span >
                        {{user.username }} <b> {{user._id == battle.winner._id ? '- Winner' : ''}} </b>
                    </span>
                </div>
            </div>
        </div>
            
    </ion-content>
</ion-view>
